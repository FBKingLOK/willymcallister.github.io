---
layout: article
title:  "Inductor kickback"
author: Willy McAllister
comments: true
---

The inductor is one of the [ideal circuit elements]({{ site.baseurl }}{% link _articles/ideal-elements-and-sources.md %}#inductor). We learn how an inductor behaves by looking closely at its $i$-$v$ equation.

Written by Willy McAllister.

----

### Contents
{:.no_toc}

* Will be replaced with the ToC
{:toc}

----

### Where we're headed 
{:.no_toc}

* When an inductor is connected to a switch what happens when the switch is thrown open? Where does the inductor current go? 

* We protect sensitive components from high voltages generated by an inductor by placing a diode in parallel with the inductor.

---

## Inductor and a switch

We use the integral form of the inductor equation to analyze this circuit,

![](https://ka-perseus-images.s3.amazonaws.com/f3a1e6701ede6e463480e70e99b852bc3d074d5e.svg){: .centered :}{: height="200px"}

The circuit is a series connection of a voltage source, a $10\,\text{mH}$ inductor, and a push-button switch $(\text{pb})$. The reference node (ground) is the $-$ terminal of the voltage source. The top terminal of the inductor is held at a constant $3\,\text V$ above ground by the voltage source. The voltage across the inductor is $v_\text L$, and the voltage across the switch is $v_\text{pb}$. $v_\text{pb}$ is also the voltage of the bottom terminal of the inductor. 

We press the pushbutton at $t=0$, which completes the circuit and allows current to flow. Let's figure out the current $\blueD{i}$ through the inductor using the integral form of the inductor equation. To do this we look closely at each little moment in the life of the circuit. This may seem super detailed, but that's what it takes to fully understand what happens.

### Before the switch is pressed

We know the initial current is zero, $i(0) = 0$, because before $t=0$ the switch was not pushed and the circuit was open. With the switch is open there is no current through the inductor and therefore no slope on the current, $di/dt = 0$. That means $v_\text L = 0\,\text V$. Finally, the voltage appearing across the open pushbutton switch is $v_{\text{PB}} = 3\,\text V$. 

### After the switch is pressed

We press the pushbutton switch at $t=0$, 

![](https://ka-perseus-images.s3.amazonaws.com/3eadb471c26193eef55d1e9ce5d74298421a581b.svg){: .centered :}{: height="200px" :}

The moment we press the switch, $v_{\text{pb}}$ becomes $0\,\text V$. $+3\,\text V$ from the source is now connected across the inductor and current begins to flow. The inductor integrates its voltage according to the inductor equation,

$\displaystyle i(t) = \dfrac1{\text L}\, \int_{\,0}^{\,t} v(x)\,dx + i(0)$

$t$ is the total amount of time the switch is held down. Notice how $t$ appears as the upper limit of the definite integral. The moment the switch closes is $t=0$. The equation tells us right after the closing the current starts at $i(0) = 0$. 

$\displaystyle i(0) = \dfrac1{\text L}\, \int_{\,0}^{\,t=0} v(x)\,dx + 0 = 0$

Continuing on in time, as long as the switch remains closed, $t$ increases and the inductor integrates (sums up) its voltage and the current rises. 

$\displaystyle i(t) = \dfrac1{\text L}\, \int_{\,0}^{\,t} v(x)\,dx$

<details>
<summary>The expression inside the integral, $v(x)\, dx$ looks a little odd</summary>
<p>This equation is usually written as $v(t)\,dt$. We're asking $x$ to play the role of instantaneous time, while $t$ represents the total time the button has been held down. $x$ is called a <em>dummy variable of integration</em>. The reason we need $x$ (or any other variable name besides $t$) is because we want variable $t$ to be the upper limit. $x$ will disappear when we compute the definite integral, leaving us with current as a function of total time, $i(t)$.</p>
</details>

For our example circuit we can fill in the real values we know for $\text L$ and $v$. $\text L$ is $10\,\text{mH}$ and $v(t)$ is a constant $3\,\text V$,

$\displaystyle i(t) = \dfrac1{10\,\text{mH}}\, \int_{\,0}^{\,t} 3\,dx = \dfrac{3}{10\,\text{mH}}\, \int_{\,0}^{\,t} dx$

The integral of $dx$ evaluates to just $x$.  
We evaluate $x$ between the limits $0$ and $t$,

$\displaystyle i(t) = \dfrac{3\text V}{10\,\text{mH}}\,\, x\,\bigg  \|_{\,0}^{\,t}$

$\displaystyle i(t) = \dfrac{3\text V}{10\,\text{mH}}\,\, [ \,t - 0\,]$

$i(t) = \dfrac{3\text V}{10\,\text{mH}}\,\,t$

This is the equation of a line while the switch is pressed. The slope of the line is,

 $\dfrac{3\,\text V}{0.010\,\text H} = 300\,\text{amps/second}$

As long as the switch is pressed, the current in the inductor increases $300$ amperes every second. That current is provided by the ideal voltage source,

![Inductor current ramp]({{ site.baseurl }}{% link i/inductor_in_action_current_ramp.svg %}){: .centered :}

As the current ramps up, all that energy is being stored in the inductor's magnetic field. (The energy does not dissipate as heat like it does with a resistor.)

As an explicit example, we can compute the current at $t=0.002$ seconds $(2\,\text{ms})$ after the switch is pushed. Use the equation we derived. The current will rise to $i(0.002) = 300\cdot 0.002 = 0.6\,\text{amps}$ or $600 \,\text{mA}$.

Now we know what happens when the switch is pushed. We should probably let it go at some point. 

### Release the switch

Let's say we take our finger off the button at $t=2\,\text{ms}$ and the switch opens. Let's figure out what happens using the derivative form of the inductor equation,

$v = \text L\,\dfrac{di}{dt}$

When we release the push-button, we are asking the current to instantly change from $600 \,\text{mA}$ to $0\,\text{mA}$. But wait a second. This means $i$ changes from finite amps to $0$ amps in $0$ time. 

The derivative of current $\dfrac{di}{dt}$ is $\dfrac{0-600}{0}= -\infty !$

The inductor equation predicts $v$ will be infinite! Can that happen? 

No, it cannot. The current in an inductor cannot change instantaneously because that requires an infinite voltage to exist, which isn't going to happen in real life. This refusal to change instantly is because of the energy stored in the magnetic field surrounding the inductor.

*The current in an inductor does not (will not) change instantaneously.*

<details>
<summary>inductance is like mass</summary>
<p>Inductance in an electrical system is analogous to mass or inertia in a mechanical system. The energy in the magnetic field of an inductor doesn't allow the current to change instantaneously, just like the mass of the car tends to resist changes in velocity. A car cannot be stopped or started in $0$ time. An inductor is basically the electrical version of Newton's First Law of Motion (also called the Law of Inertia): A body in motion tends to stay in motion.</p>
</details>

We have a puzzle on our hands. We opened the switch while current flowed in the inductor. The open switch means there is no place for current to flow. What happens to the finite inductor current that insists on flowing?

### What happens in an ideal circuit? 

What a mess. With ideal models we have all the current and voltage we want. But in this situation something breaks the ideal models. We created an impossible fight: The switch says the current has to be zero, and the inductor says the current has to be the same finite value (whatever it was before the switch opened). Zero and finite at the same time? Huh? Not solvable. We've hit the extremes of our ideal models and they no work. It makes my head hurt.

### What happens in a real-life circuit? 

When the switch opens at $t=2\,\text{ms}$, we expect the current to change from $600\,\text{mA}$ to $0\,\text{mA}$ in $0$ time. Let's not be greedy. Let's say it's okay for the switch to take $1\,\mu\text{sec}$ to go from closed to open. Does that help? The voltage we would see across the inductor is,

$v_{\text L} = \text L \,\dfrac{di}{dt}$

$v_\text L = 10\, \text{mH} \cdot\dfrac{(0-600\,\text{mA})}{1\,\mu\text{sec}} = 10\times 10^{-3}\cdot \dfrac{-600\times 10^{-3}}{10^{-6}}$

$v_\text L = -6{,}000 \,\text{volts} \,!$ 

The inductor voltage is still huge. The $+$ terminal of the inductor is $+3$ volts above ground. The $-$ sign on $v_{\text L}$ means the negative terminal of the inductor is $6000$ volts *above* the positive terminal. 

That makes $v_{\text{pb}} = 3 + 6000 = +6003\,\text{volts}$. 

![](https://ka-perseus-images.s3.amazonaws.com/e0d4e4ba5f8a3fb30770a298063a0b8d74d66c43.svg){: .centered :}{: height="200px" :}

This is called *inductor kickback*. Does this really happen? Yup.

What actually happens is when the switch opens a spark arcs across the air gap between the switch contacts. The energy in the magnetic field is released in a short bright burst of light. In fact, if you want to generate a spark, this is one of the best ways to do it. This is exactly how a sparkplug in a car works. It also happens whenever you flip off a mechanical light switch in your house.

<details>
<summary>air breakdown</summary>
<p>Although air is normally a very good insulator, a high voltage can break down air. When the electric field is about $3000$ volts across an air gap of $1$ millimeter, air becomes partially conductive. If the voltage goes higher, the air breaks down completely and becomes conductive. The electric field is strong enough to rip electrons away from oxygen and nitrogen molecules. That's when an electrical spark or arc bridges across the gap. </p>

<p><img src="https://ka-perseus-images.s3.amazonaws.com/a82bb3590cee9639c715ecfe9175b51b379d2b77.gif"></p>

<p>from Wikipedia <a href="https://en.wikipedia.org/wiki/Electrical_breakdown">Electrical breakdown</a>.</p>
</details>

![](https://ka-perseus-images.s3.amazonaws.com/cf4f1500138018ba9d004199dcf4fdb4d8ea8377.svg){: .centered :}{: height="200px" :}

In a real-life version of our circuit, the spark starts at around $3000$ volts. If you have a physically tough switch, it can withstand the spark. But if the switch is fragile (like a transistor used as a switch), there's a good chance the high voltage will destroy it. The spark lasts as long as it takes for the inductor current to fall to zero.

Resolving the paradox: How can there be a finite inductor current at the same time as an open circuit? In real life, the paradox is resolved this way: the inductor wins and the open circuit loses. The open switch is not actually open during the spark. 

Should I be afraid of inductors?  
You don't need to be afraid of inductors, but you should respect them. Inductors are energy storage devices, just like capacitors are energy storage devices. If you release the energy all at once, there might be a boom!

It may seem strange, to think an open circuit can cause problems, but it does when inductors are involved. The inductor and switch circuit discussed here is the most common place where you have to worry about this.

---

You can stop reading here if you want. You have a good understanding of how the two forms of the inductor equation work. This next optional section describes how to design around the high voltage spike from an inductor. 

To get the most from this description it helps if you are familiar with how a [diode]({{ site.baseurl }}{% link _articles/diode-introduction.md %}) works. A diode conducts current in one direction but not in the opposite direction.

---

## Give inductor current a place to flow

How do we avoid having our circuit destroyed by a high voltage generated by inductor kickback? When we design a circuit with a switched inductor, we think ahead and make sure current always has a place to flow. 

If we place a [diode]({{ site.baseurl }}{% link _articles/diode-introduction.md %}) in parallel with the inductor, it removes the voltage spike in a neat way. 

![](https://ka-perseus-images.s3.amazonaws.com/7da2056d17f5c82a4e10e7a107c7a173469f6879.svg){: .centered :}{: height="200px" :}

Notice the direction the diode is facing, its forward current arrow is pointing up. Current will only flow *up* through the diode.

When the switch is closed, the diode doesn't do anything.  
When the switch opens, the diode provides a path for inductor current. 

Let's go through this step by step. Start with the switch open. Then push it. Then let it go.

### Start with the switch open

With the switch in its initial open position there is $0$ current flowing, and we have $0$ volts across the inductor (and diode). $\goldD{v_{\text{pb}}}$ is $3\,\text V$.

### Close the switch

When the switch is closed, the current flows down through the inductor and switch, same as before when we didn't have the diode,

![](https://ka-perseus-images.s3.amazonaws.com/0d982ccb9fefa75f52d37ca028edbb68d6c6e27e.svg){: .centered :}{: height="200px" :}

**What is the voltage across the diode after the switch closes?** 

$v_{\text{L}} = \,$ \_\_\_\_\_\_ $\,\text V$

<details>
<summary>show answer</summary>
<p>The voltage across the diode is the same as the inductor, $v_{\text L} = 3\,\text V$.</p>
</details>

**Is the diode forward biased or reverse biased?** 

<details>
<summary>show answer</summary>
<p>The  diode is reverse biased because the cathode is at a higher voltage than the anode.</p>
<p><img src="https://ka-perseus-images.s3.amazonaws.com/75821455e232b104c14e9fdd6a6180b1526f63d6.svg" height="200px"> </p>

</details> 

**What is the approximate diode current?** 

$i_{\text{diode}}\approx$ \_\_\_\_\_\_$\,\text A$

<details>
<summary>show answer</summary>
<p>When the diode is reverse biased its current is very close to $0$.</p>

<p>Since there's no current in the diode, it's as if it isn't even there. When the switch is closed, the diode has no impact on the current or voltage elsewhere in the circuit.</p>
</details> 

### Release the switch

Now we release the push-button switch and it opens. Before, when there was no diode, the open switch caused $v_{\text{pb}}$ to spike up to a huge positive voltage. Now, with the diode, something better happens.

![Diode prevents kickback circuit]({{ site.baseurl }}{% link i/inductor_kickback1.svg %}){: .centered :}{: height="200px" :}

Even with the diode, there is still a big $di/dt$ right after the switch opens, which makes $v_{\text{pb}}$ rapidly head towards a big positive value.

**But, what happens when $v_{\text{pb}}$ reaches $3.7$ volts?**  
(Choose all that apply.)

* The diode becomes forward biased.
* The diode starts to conduct.

<details>
<summary>show answer</summary>
<p>The top of the diode is fixed at $3\,\text V$. When the bottom of the diode gets up to $3.7\,\text V$ it becomes forward biased (the anode is $0.7\text V$ higher than the cathode).</p>

<p><img src="https://ka-perseus-images.s3.amazonaws.com/8e33697a5b72b50177b2573f0287662ddc0cb016.svg" height="200px"></p>

<p>When the voltage at the diode's bottom terminal gets up to $3$ volts plus an additional  $\sim0.7$ volts, <em>the forward biased diode starts to conduct!</em> </p>
</details>

The forward biased diode provides a path for the inductor current to flow. When the diode turns on, the inductor current actually turns right and flows *up* through the diode. When it gets through the diode, the current turns left and flows back through the inductor, going in a circle. 

What does this do to the voltage? The diode voltage prevents $v_{\text{pb}}$ from getting much higher than $3.7$ volts. The diode *clamps* the voltage at this value. The voltage never gets a chance to shoot up to a dangerous high level. This clamping action preventing the dreaded arc. Everybody is happy. 

The inductor current, $\blueD i$, circles around until the real-world resistance of the inductor wiring dissipates the inductor's stored energy as heat. The diode prevents a major inductive voltage spike and protects the surrounding components.

## Simulation model

The effect described here really happens. Take some time to explore this [simulation model](http://spinningnumbers.org/circuit-sandbox/index.html?value=[["v",[96,80,0],{"name":"","value":"dc(3)","_json_":0},["3","0"]],["l",[232,16,0],{"name":"","l":"5m","_json_":1},["3","1"]],["d",[320,64,2],{"name":"","area":"1","type":"normal","_json_":2},["1","3"]],["n",[280,152,0],{"name":"","WL":"20000","_json_":3},["1","2","0"]],["v",[168,152,4],{"name":"Vsw","value":"pulse(0,3,1u,1n,1n,20u,200u)","_json_":4},["2","0"]],["w",[96,200,96,128]],["g",[96,200,0],{"_json_":6},["0"]],["w",[96,80,96,16]],["w",[96,16,232,16]],["w",[320,16,232,16]],["w",[256,176,216,176]],["w",[216,152,216,176]],["s",[280,104,0],{"color":"cyan","offset":"0","_json_":12},["1"]],["w",[96,200,168,200]],["w",[280,200,168,200]],["w",[168,152,216,152]],["w",[320,64,320,104]],["w",[320,104,280,104]],["w",[232,104,280,104]],["w",[232,104,232,64]],["w",[280,152,280,104]],["view",-50,-33.19999999999999,1.5625,"50","10","1G",null,"100","500u","1000"]]). 

The N-type MOSFET transistor and voltage pulse source at the bottom of the schematic play the role of push-button switch.

#### Explore 
{:.no_toc}

1. Move the voltage probe over to the Vsw node. 
2. Click on TRAN to see how the switch works. 
    * Notice the on/off pattern of Vsw. This controls the NMOS transistor switch.  
    Vsw low is switch open. Vsw high is switch closed. 
3. Move the voltage probe back to $v_{\text{pb}}$ and run TRAN again. 
    * What is the highest voltage reached by $v_{\text{pb}}$ when the switch opens?
    * Notice how the voltage stays flat for a while and then returns to $3\,\text V$ as the inductor energy runs out. 


## Summary
{:.no_toc}

The current in an inductor does not change instantaneously.

When its current is constant, an inductor looks like a short circuit.

Be careful making circuits with an inductor. A sudden changed in current, like a switch thrown open, means the derivative of current, $di/dt$, can become very large. The inductor equation tells us there can be a large voltage generated across the inductor. 

One way to deal with potentially destructive inductor voltage is to design an alternate path for the current, to prevent the large voltage from happening. 

We showed how to add a clamping diode to provide a current path and limit the inductor voltage to an acceptable safe value when a switch was thrown open.
